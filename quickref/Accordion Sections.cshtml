@inherits Custom.Hybrid.RazorTyped
@using ToSic.Razor.Blade;
@{
  // Sys helps generate code snippets etc.
  var Sys = GetCode("/shared/Helpers.cs").Init(this);
  // The accordion is an external helper file, so we must treat it as dynamic
  var acc = MyModel.Get("Accordion") as dynamic;
  var root = AsItem(acc.Item as object).String("RootPath") + "/";
}
@foreach(var acs in acc.Sections(Path, root, backtrack: "..")) {
  if (acs.SectionFile != null) {
    var relPath = acc.ReworkPath("..");
    <div>
      test 2dm: @relPath <br>
      Path: @Path <br>
      AppPath: @App.Folder.Path

    </div>
    @acs.Start()
      @* @Html.Partial(relPath, new { acs.Item }) *@
      @Html.Partial(acs.SectionFile, new { acs.Item })
    @acs.End()
  } else if (MyUser.IsSystemAdmin) {
    <div>SysUserOnly: This section doesn't exist: @acs.TutorialId</div>
  } else {
    <!-- this section '@acs.TutorialId' doesn't exist -->
  }
}
