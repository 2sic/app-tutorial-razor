@inherits Custom.Hybrid.Razor14
@using ToSic.Razor.Blade;
<hide>
  @* Sys must always be an exact copy of this line, so that we could search/replace *@
  @{ var Sys = CreateInstance("../shared/Helpers.cs").Init(this); }
  @{ dynamic snip = null; }
</hide>

@* Snippet for the old v14 code, which shouldn't run but should be shown. This is a bit of a hack, but it works *@
@((snip = Sys.SourceCode.TabsWithSnippet()).SnipStart("number-params"))
  @{
    // This variable is a string, but could be null or empty
    var idAsString = CmsContext.Page.Parameters["id"];
    // This converts the id parameter to int. First sample auto-falls back to 0, other to -1
    var id = Kit.Convert.ToInt(CmsContext.Page.Parameters["id"]);
    var idOrMinus1 = Kit.Convert.ToInt(CmsContext.Page.Parameters["id"], -1);
  }
  <ul>
    <li>
      <strong>Raw id from URL:</strong> @idAsString <br>
      Equal to string "27": @(idAsString == "27") <br>
      Equal to number 27: (would throw error) <br>
    </li>
    <li>
      <strong>Number id from URL:</strong> @id <br>
      Equal to string "27": (would throw error) <br>
      Equal to number 27: @(id == 27) <br>
    </li>
    <li>
      <strong>Number id from URL or -1:</strong> @idOrMinus1 <br>
      Equal to string "27": (would throw error) <br>
      Equal to number 27: @(idOrMinus1 == 27) <br>
    </li>
  </ul>
@snip.SnipEnd()

<hide>
@functions {
  dynamic SubpageLink(string label, string urlparams) {
    return Tag.Li()
      .Wrap(
        Tag.A(label).Href(Link.To(parameters: "?basics311=page&" + urlparams))
      );
  }
}
