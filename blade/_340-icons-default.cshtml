@inherits Custom.Hybrid.Razor14
@using ToSic.Razor.Blade;
<hide>
@Html.Partial("_header.cshtml")
@{
  // 2sxclint:disable:no-razorblade-htmlpage
  var hlp = CreateInstance("../shared/Helpers.cs");
}
</hide>
<trim>
  <div class="row">
    <div class="col-lg-7">
      <h2><em>RazorBlade</em> AddIcon to Html Headers</h2>

      @Html.Partial("_MessageDnnOnlyUseIPageService.cshtml")

      @Html.Partial("../shared/_KitBaseClassInfoBox.cshtml", new { ServiceName = "Scrub", Service = "IScrub" })

      <div>
        This page sets various icon headers according to best practices. 

        Look at the html-header in the output-source to see the effect. <br>
        The following links will set different icons depending on what you need.
      </div>
      <ul>
        @SubpageLink("Just add single icon", "one")
        @SubpageLink("Add default set incl. favicon and apple-touch", "set")
        @SubpageLink("Add default set without favicon", "nofav")
        @SubpageLink("Add default set with custom favicon (recommended)", "pngfav")
      </ul>
    </div>
    @Html.Partial("../shared/_DefaultInfoSection.cshtml")
  </div>
</trim>

@if(CmsContext.Platform.Name == "Oqtane") {
  @Html.Partial("../shared/_MessageOqtaneDisabled.cshtml")
} else {
  // use url parameter to decide which icon(s) to show, and default to "set"
  var mode = CmsContext.Page.Parameters["mode"] ?? "set";

  // the icon we want to use for this page is this png file
  var iconUrl = App.Path + "/blade/assets/razor-blade-icon.png";

  // now add the headers depending on the demo you picked
  // in your code you would only use one of these
  if(mode == "one") {
    Kit.Page.AddIcon(iconUrl);
  } 
  else if (mode == "set") {
    Kit.Page.AddIconSet(iconUrl);
  } 
  else if (mode == "nofav") {
    Kit.Page.AddIconSet(iconUrl, favicon: false);
  }
  else if (mode == "pngfav") {
    Kit.Page.AddIconSet(iconUrl, favicon: iconUrl);
  }
}

<hide>
@functions {
  dynamic SubpageLink(string label, string root, string key, string value) {
    return Tag.Li().Class(CmsContext.Page.Parameters[key] == value ? "selected" : "")
      .Wrap(
        Tag.A(label).Href(@Link.To(parameters: "?" + root + "&" + key + "=" + value))
      );
  }

  dynamic SubpageLink(string label, string value) {
    return SubpageLink(label, "blade340=page", "mode", value);
  }
}
@Html.Partial("../shared/_PreCodeFooter.cshtml")
@Html.Partial("../shared/_source-code.cshtml", new { Path, isExpanded=true })
</hide>