@inherits Custom.Hybrid.RazorTyped
@{ var Sys = GetCode("/shared/Helpers.cs").Init(this); }
@{ dynamic qref; }

@* UniqueKey / Kit.Key.UniqueKeyWith *@
  @((qref = Sys.SourceCode.QuickRefSplit33(tabs: new Dictionary<string, string> {
    { "Helper Razor", "file:shared-uniquekey-message.cshtml" },
    { "JS File", "file:js/unique-key.js" },
  })).SnipStart())
    @{
      var buttonId = "demo-uniquekey-btn-" + UniqueKey;
      var messageId = "demo-uniquekey-msg-" + UniqueKey;
    }
    @* Show the button *@
    <button type="button" id="@buttonId" class="btn btn-primary">
      Press this to see JS find the button using the UniqueKey: @buttonId
    </button>

    @* Create the DIV for the message - it's in another file, but shares the UniqueKey *@
    @Html.Partial("./shared-uniquekey-message.cshtml")

    @* Trigger the script, and pass in the IDs it will need based on the UniqueKey *@
    @Kit.Page.TurnOn("window.quickReference.demoUniqueQuey()", data: new { buttonId, messageId })
    @* Load the script - this can be before or after the TurnOn *@
    <script src="@MyView.Folder.Url/js/js/unique-key.js"></script>
  @qref.SnipEnd()



  <h3>Combined Unique Keys with UniqueKeyWith(...) - new v16.04 üåü</h3>
  <p>
    Sometimes you need a <code>UniqueKey</code> which also depends on other objects.
    For example, you may need to have a UniqueKey which also uses another value - or many.
    This is done using <code>@@Kit.Key.UniqueKeyWith(...)</code>.
  </p>
  @((qref = Sys.SourceCode.QuickRefSplit33()).SnipStart())
    <ol>
      <li>
        Unique Key with <code>12345</code>:
        <code>@Kit.Key.UniqueKeyWith(12345)</code>
      </li>
      <li>
        Unique Key with <code>"hello"</code>:
        <code>@Kit.Key.UniqueKeyWith("hello")</code>
      </li>
      <li>
        Unique Key with <code>"bad chars in id ! % / üëçüèΩ"</code>:
        <code>@Kit.Key.UniqueKeyWith("bad chars in id ! % / üëçüèΩ")</code>
      </li>
      <li>
        Unique Key with <code>"this is a long text and should be shortened"</code>:
        <code>@Kit.Key.UniqueKeyWith("this is a long text and should be shortened")</code>
      </li>
      <li>
        Unique Key with <code>12345</code> and <code>"hello"</code>:
        <code>@Kit.Key.UniqueKeyWith(12345, "hello")</code>
      </li>
    </ol>
  @qref.SnipEnd()
  


  <h3>Generate Unique Keys for Items/Entities - new v16.04 üåü</h3>
  <p>
    If the <code>UniqueKey</code> is based on known object types such as Entities, this works very well.
    For example, you may need to loop through a list of items, and each item needs a unique key.
  </p>
  @((qref = Sys.SourceCode.QuickRefSplit33()).SnipStart())
    @{
      var books = AsItems(App.Data["Books"]);
    }
    <ol>
      @foreach(var book in books) {
        <li>
          Title: <code>@book.Title</code> - UniqueKey: <code>@Kit.Key.UniqueKeyWith(book)</code>
        </li>
      }
    </ol>
  @qref.SnipEnd()