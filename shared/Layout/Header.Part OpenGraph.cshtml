@inherits Custom.Hybrid.Razor14
@using ToSic.Razor.Blade;
@{
  var Sys = DynamicModel.Sys;
  var viewMdType = Sys.TutViewMetadataType as string;
  var md = CmsContext.View.Metadata;

  if (md == null) {
    return;
  }

  @* Adding Metadata for Opengraph sharing *@
  var viewMd = AsList(md.OfType(viewMdType) as object).FirstOrDefault();
  if (viewMd == null) { return; }

  @* meta variables *@
  var metaTitle = Tags.Strip(viewMd.LinkTitle);
  var metaDescription = Tags.Strip(viewMd.LinkTeaser);
  var metaImageUrl = "";
  var metaUrlTarget = Link.To(parameters: CmsContext.Page.Parameters);

  // Add open graph meta information
  Kit.Page.AddOpenGraph("og:type", "article");
  Kit.Page.AddOpenGraph("og:title", metaTitle);
  Kit.Page.AddOpenGraph("og:site_name", metaTitle);
  Kit.Page.AddOpenGraph("og:url", metaUrlTarget);
  Kit.Page.AddOpenGraph("og:description", metaDescription);
  Kit.Page.AddOpenGraph("og:image", metaImageUrl);
  Kit.Page.AddOpenGraph("og:image:height", "630");
  Kit.Page.AddOpenGraph("og:image:width", "1200");

  // Add twitter meta information
  Kit.Page.AddMeta("twitter:card", "summary_large_image");
  Kit.Page.AddMeta("twitter:title", metaTitle);
  Kit.Page.AddMeta("twitter:description", metaDescription);
  Kit.Page.AddMeta("twitter:image", metaImageUrl);
}