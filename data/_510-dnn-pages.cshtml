@inherits Custom.Hybrid.Razor12
<hide>
@Html.Partial("_header.cshtml")
@{  
  var linker = CreateInstance("../shared/Helpers.cs");
}
@*
  Tag: #DnnOnly - ATM can't work in Oqtane because it uses the Factory command
  2sxclint:disable:no-dnn-namespaces
*@
</hide>
@using System.Collections.Generic;
<trim>
<h2>Example from DNN Data</h2>
<p>
  DNN also provides a lot of data about users, pages etc. In this example, we'll list all the pages (tabs) in DNN and mark the one we're on. 
  To read more about the DNN APIs, check out the API docs for <a href="https://docs.dnncommunity.org/api/DotNetNuke.Entities.Tabs.TabController.html" target="_blank">TabController</a> and <a href="https://docs.dnncommunity.org/api/DotNetNuke.Entities.Tabs.TabInfo.html" target="_blank">TabInfo</a>. 
  Please note that the API isn't very consistent - so sometimes things use <code>ID</code>, sometimes <code>Id</code>, so best really verify the exact names as spelled in the API.
</p>
</trim>
<snippet id="dnn-pages">
@{#if NETCOREAPP}
  @Html.Partial("../shared/_MessageOqtaneDisabled.cshtml")
@{#else}
@{
  // get the pages
  var pages = DotNetNuke.Entities.Tabs.TabController.GetPortalTabs(CmsContext.Site.Id, 0, true, false);
  var current = DotNetNuke.Entities.Tabs.TabController.CurrentPage;
}
</snippet>
<hide-silent> @* Show only this snippet *@
  @Html.Partial("../shared/_source-code.cshtml", new { Path, Snippet = "dnn-pages", Size = 200 }) 
</hide-silent>


<snippet id="dnn-pages-foreach">
<ul>
  @foreach(DotNetNuke.Entities.Tabs.TabInfo dnnPage in pages) {
    <li class='@(dnnPage.TabID == current.TabID ? "selected" : "")'>
      <a href="@dnnPage.FullUrl" target="_blank">
        @dnnPage.TabName (#@dnnPage.TabID)
      </a>
    </li>
  }
</ul>

@{#endif}
</snippet>
<hide-silent> @* Show only this snippet *@
  @Html.Partial("../shared/_source-code.cshtml", new { Path, Snippet = "dnn-pages-foreach", Size = 250 }) 
</hide-silent>

<hide>
@Html.Partial("../shared/_source-code.cshtml", new { Path }) 
</hide>