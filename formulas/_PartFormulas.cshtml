@inherits Custom.Hybrid.Razor14
@using ToSic.Razor.Blade;
@using System.Linq;
@{
  var hlp = CreateInstance("../shared/Helpers.cs");
  string resultsCode = hlp.ResultsFile;

  var fHlp = CreateInstance("Helpers.cs");
  var formulas = fHlp.GetFormulas(DynamicModel.ContentType, DynamicModel.FieldName);

  var title = DynamicModel.Title;
}

@if (Text.Has(title)) {
  <h3>@title @fHlp.DemoToolbar(DynamicModel.ContentType, DynamicModel.More).AsTag()</h3>
  <p>
    @if(Text.Has(DynamicModel.Instructions)) {
      @DynamicModel.Instructions
      <br />
    }
    <em>Click on the (Î£) button above to see the edit-UI with the formula. </em>
  </p>
}

<div class="mb-5">
  <h3>Formulas of <code>@(DynamicModel.ContentType).@DynamicModel.FieldName</code></h3>
  @foreach (var formula in formulas)
  {
    <p><strong>@formula.Title</strong> (Formula-Target: @formula.Target)</p>
    @Html.Partial(resultsCode, new { Result = formula.Formula, Language = "javascript" })
  }
</div>