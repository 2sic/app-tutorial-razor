@inherits Custom.Hybrid.Razor14
@using ToSic.Razor.Blade;
<hide>
  @* Sys must always be an exact copy of this line, so that we could search/replace *@
  @{ var Sys = CreateInstance("../shared/Helpers.cs").Init(this); }
  @Html.Partial("_header.cshtml", new { Sys = Sys })
</hide>

<hide>
  @{
    var fancybox = CreateInstance("../shared/Fancybox.cs");

    CreateInstance("../Shared/ToolbarHelpers.cs").EnableEditForAnonymous(Edit);

    var sharedExamples = CreateInstance("SharedExamples.cs");
  }
  @functions {
    dynamic ShowFormula(object specs) {
      return Html.Partial("_PartFormulas.cshtml", specs);
    }
  }
</hide>

<div class="row">
  <div class="col-md-7">
    <h2>Formulas affecting Values</h2>
    <p>We'll show you examples where formulas can be applied to set the Value in many ways. </p>
  </div>
  @Html.Partial("../shared/_DefaultInfoSection.cshtml")
</div>
@Html.Partial("../shared/_WarnAnonymousIfFeatureIsOff.cshtml")

@* Fill If Empty *@
@{
  var specs = Sys.SourceCode.Formulas.Specs(
    title: "Set the Value if it's empty",
    instructions: "This formula sets the value of a field if it's empty. As long as it's not empty, the user can type anything he/she wants. ",
    contentType: "FormulasIfEmpty",
    field: "Title"
  );
}
@Sys.SourceCode.FormulaShow(specs)


@* Combine Values of Fields *@
@{ specs = Sys.SourceCode.Formulas.Specs(
  title: "Generate a Field Combining Others",
  instructions: "This formula combines the values of 3 fields into a URL Slug. ",
  contentType: "FormulasCombineValues",
  field: "UrlKey"
);}
@Sys.SourceCode.FormulaShow(specs)

<hr>
<h2>Get Data for a Field from a Web API</h2>

@* Get Value from WebApi *@
@ShowFormula(sharedExamples.ValueFromWebApi())





<hr>
<h2>Date Examples</h2>

@* Date Examples #1 *@
@{ specs = Sys.SourceCode.Formulas.Specs(
  title: "Date - Prefill but leave editable",
  instructions: "This formula sets the initial value to the current date (if the field is empty). You can try it by deleting the value, once you leave the field it's updated again. ",
  contentType: "FormulasDates",
  field: "RightNow"
);}
@Sys.SourceCode.FormulaShow(specs)

@* Date Examples #2 *@
@{ specs = Sys.SourceCode.Formulas.Specs(
  title: "Date - Calculate value",
  instructions: "This formula sets the third field to the current date/time + an offset the user can choose in a dropdown. "
    + "Note that since we do some calculations, we must make sure the result is time-zone cleaned. ",
  contentType: "FormulasDates",
  field: "PublishWhen"
);}
@Sys.SourceCode.FormulaShow(specs)

@Sys.PageParts.FooterWithSource()
