@inherits Custom.Hybrid.Razor14
@using ToSic.Razor.Blade;
@using System.Linq;
@using ToSic.Eav.DataSources;
<hide>
  @* Sys must always be an exact copy of this line, so that we could search/replace *@
  @{ var Sys = CreateInstance("../shared/Helpers.cs").Init(this); }
  @Html.Partial("header.cshtml", new { Sys = Sys }) 
</hide>


<h2>Custom Dynamic DataSources - Lists</h2>
<div @Sys.PageParts.InfoWrapper()>
  @Html.Partial("../shared/DefaultInfoSection.cshtml")
  <div @Sys.PageParts.InfoIntro()>
    <p>
      The previous example just returned one item/entity.
      But of course you can also return a list of items.
      This is the more common case.
      Our sample basically will just return data it generated, but your code will usually get data from elsewhere and provide it as a list.
    </p>

  </div>
</div>

<trim>
  <h2>Basic List</h2>
  <p>
    Return a list of items numbered 1...5 with random Guid identifier.
  </p>
</trim>

@Sys.SourceCode.ResultStart("custom-101", "ListBasic.cs")
  @{
    // Create the Dynamic DataSource with the name "Basic101"
    var basic101 = Kit.Data.GetSource(name: "ListBasic");
  }
  <h3>List of Data in the DataSource (@basic101.List.Count())</h3>
  <ul>
    @foreach (var item in AsList(basic101)) {
      <li>
        <strong>@item.Title</strong> (@item.EntityId / @item.EntityGuid) - Fav Number: @item.FavoriteNumber
      </li>
    }
  </ul>
@Sys.SourceCode.ResultEnd("file:../DataSources/ListBasic.cs")

<h2>Advanced List</h2>

@Sys.SourceCode.ResultStart("webapi", "DataFromWebService.cs")
  @{
    // Create the Dynamic DataSource with the name "DataFromWebService"
    var weather = Kit.Data.GetSource(name: "DataFromWebService");
  }
  <h3>Data in the DataSource (@weather.List.Count())</h3>
  <ul>
    @foreach (var item in AsList(weather)) {
      <li>Current Temperature: @item.Temperature</li>
      <li>WindSpeed: @item.WindSpeed</li>
      <li>WindDirection: @item.WindDirection</li>
    }
  </ul>
@Sys.SourceCode.ResultEnd("file:../DataSources/DataFromWebService.cs")

@* Footer *@
@Html.Partial("../Shared/Layout/FooterWithSource.cshtml", new { Sys = Sys })
