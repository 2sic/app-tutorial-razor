@inherits Custom.Hybrid.RazorTyped
@{
  var Sys = GetCode("../Sys.cs").Init(this);
  var tg = MyModel.Item("TutorialGroup");
  var recursion = MyModel.Int("Recursion");
  if (recursion > 3) {
    throw new Exception("Recursion too high");
  }
}

@(tg.Bool("IsPage") ? "üìÑ" : "üéÅ")

Tutorial Group: @tg.Title [Accs: @tg.Children("Accordions").Count() | Snips: @tg.Children("Sections").Count()]
@if (tg.Bool("IsPage")) {
  <a href='@Sys.TutPageUrl(tg)' target="_blank">üì§</a>
}
<br>
@Html.Partial("./Part WithNotes.cshtml", new { Item = tg })

@if (tg.IsNotEmpty("Accordions") || tg.IsNotEmpty("Sections")) {
  <ol>
    @foreach (var acc in tg.Children("Accordions")) {
      <li>
        @Html.Partial("./Part TutorialGroupContents.cshtml", new { TutorialGroup = acc, Recursion = recursion + 1 })
      </li>
    }
    @foreach (var sc in tg.Children("Sections")) {
      <li>
        Section: @sc.Title
        @Html.Partial("./Part WithNotes.cshtml", new { Item = sc })
      </li>
    }
  </ol>
}
